{% extends 'base.html' %}
{% load static %}

{% block title %}í–¥ìˆ˜ ì§€ì‹ ì‹œìŠ¤í…œ - ì‚¬ìš© ì˜ˆì‹œ{% endblock %}

{% block header_title %}ğŸ“š ì‚¬ìš© ì˜ˆì‹œ ëª¨ìŒ{% endblock %}
{% block header_subtitle %}ë‹¤ì–‘í•œ ìƒí™©ì—ì„œ í–¥ìˆ˜ ì§€ì‹ ì‹œìŠ¤í…œ í™œìš©ë²•{% endblock %}

{% block content %}
<div class="alert alert-info">
    <strong>ğŸ’¡ íŒ:</strong> ëª¨ë“  ì˜ˆì‹œëŠ” ì‹¤ì œë¡œ ì‘ë™í•©ë‹ˆë‹¤. ë²„íŠ¼ì„ í´ë¦­í•´ì„œ í–¥ìˆ˜ ì§€ì‹ì„ í™•ì¸í•´ë³´ì„¸ìš”!
</div>

<!-- ê¸°ë³¸ ì‚¬ìš©ë²• -->
<div class="card">
    <h3>1. ê¸°ë³¸ ì‚¬ìš©ë²•</h3>
    <p>ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ìœ¼ë¡œ í–¥ìˆ˜ ì§€ì‹ì„ í‘œì‹œí•©ë‹ˆë‹¤.</p>
    <div class="code-block">
// ê¸°ë³¸ ì‚¬ìš©ë²•
await showLoading(async () => {
    // ì—¬ê¸°ì— ì‹¤ì œ ì‘ì—… ì½”ë“œ
    await new Promise(resolve => setTimeout(resolve, 3000));
    return 'ì‘ì—… ì™„ë£Œ!';
});
    </div>
    <button class="btn" onclick="basicExample()">ê¸°ë³¸ ì˜ˆì‹œ ì‹¤í–‰ (3ì´ˆ)</button>
</div>

<!-- ë‹¤ì–‘í•œ í…Œë§ˆ -->
<div class="card">
    <h3>2. ë‹¤ì–‘í•œ í…Œë§ˆ</h3>
    <p>ë‹¤í¬ í…Œë§ˆ, ë¯¸ë‹ˆë©€ í…Œë§ˆ ë“± ë‹¤ì–‘í•œ ìŠ¤íƒ€ì¼ì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
    <div class="code-block">
// ë‹¤í¬ í…Œë§ˆ
await showLoading(taskFn, { theme: 'dark' });

// ë¯¸ë‹ˆë©€ í…Œë§ˆ  
await showLoading(taskFn, { theme: 'minimal' });
    </div>
    <button class="btn" onclick="darkThemeExample()">ë‹¤í¬ í…Œë§ˆ (2ì´ˆ)</button>
    <button class="btn btn-secondary" onclick="minimalThemeExample()">ë¯¸ë‹ˆë©€ í…Œë§ˆ (2ì´ˆ)</button>
</div>

<!-- ìœ„ì¹˜ ì¡°ì • -->
<div class="card">
    <h3>3. ìœ„ì¹˜ ì¡°ì •</h3>
    <p>í™”ë©´ ìƒë‹¨, ì¤‘ì•™, í•˜ë‹¨ì— í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
    <div class="code-block">
// ìƒë‹¨ì— í‘œì‹œ
await showLoading(taskFn, { position: 'top' });

// í•˜ë‹¨ì— í‘œì‹œ
await showLoading(taskFn, { position: 'bottom' });
    </div>
    <button class="btn btn-success" onclick="topPositionExample()">ìƒë‹¨ í‘œì‹œ (2ì´ˆ)</button>
    <button class="btn btn-warning" onclick="bottomPositionExample()">í•˜ë‹¨ í‘œì‹œ (2ì´ˆ)</button>
</div>

<!-- ì‹¤ì œ API í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜ -->
<div class="card">
    <h3>4. ì‹¤ì œ API í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜</h3>
    <p>ì„œë²„ì™€ í†µì‹ í•˜ëŠ” ì‹¤ì œ ìƒí™©ì„ ì‹œë®¬ë ˆì´ì…˜í•©ë‹ˆë‹¤.</p>
    <div class="code-block">
// API í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜
await showLoading(async () => {
    const response = await fetch('/api/data');
    const data = await response.json();
    return data;
});
    </div>
    <button class="btn btn-danger" onclick="apiSimulationExample()">API ì‹œë®¬ë ˆì´ì…˜ (4ì´ˆ)</button>
</div>

<!-- ì—°ì† ì‘ì—… -->
<div class="card">
    <h3>5. ì—°ì† ì‘ì—…</h3>
    <p>ì—¬ëŸ¬ ì‘ì—…ì„ ì—°ì†ìœ¼ë¡œ ìˆ˜í–‰í•˜ë©´ì„œ ê°ê° ë‹¤ë¥¸ í–¥ìˆ˜ ì§€ì‹ì„ í‘œì‹œí•©ë‹ˆë‹¤.</p>
    <div class="code-block">
// ì—°ì† ì‘ì—…
for (let i = 0; i < 3; i++) {
    await showLoading(async () => {
        await new Promise(resolve => setTimeout(resolve, 2000));
        return `ì‘ì—… ${i + 1} ì™„ë£Œ`;
    });
}
    </div>
    <button class="btn" onclick="sequentialTasksExample()">ì—°ì† ì‘ì—… ì‹¤í–‰ (6ì´ˆ)</button>
</div>

<!-- ì—ëŸ¬ ì²˜ë¦¬ -->
<div class="card">
    <h3>6. ì—ëŸ¬ ì²˜ë¦¬</h3>
    <p>ì‘ì—… ì¤‘ ì—ëŸ¬ê°€ ë°œìƒí•´ë„ ì ì ˆíˆ ì²˜ë¦¬ë©ë‹ˆë‹¤.</p>
    <div class="code-block">
// ì—ëŸ¬ ì²˜ë¦¬
try {
    await showLoading(async () => {
        throw new Error('ì˜ë„ëœ ì—ëŸ¬');
    });
} catch (error) {
    console.log('ì—ëŸ¬ ì²˜ë¦¬ë¨:', error.message);
}
    </div>
    <button class="btn btn-warning" onclick="errorHandlingExample()">ì—ëŸ¬ ì²˜ë¦¬ ì˜ˆì‹œ</button>
</div>

<!-- ì»¤ìŠ¤í…€ ë¡œë” -->
<div class="card">
    <h3>7. ì»¤ìŠ¤í…€ ë¡œë”</h3>
    <p>íŠ¹ë³„í•œ ì„¤ì •ìœ¼ë¡œ ë¡œë”ë¥¼ ìƒì„±í•˜ê³  ì¬ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
    <div class="code-block">
// ì»¤ìŠ¤í…€ ë¡œë” ìƒì„±
const customLoader = createLoader({
    theme: 'dark',
    position: 'top',
    showDelay: 500
});

// ì¬ì‚¬ìš©
await customLoader.show(taskFn1);
await customLoader.show(taskFn2);
    </div>
    <button class="btn" onclick="customLoaderExample()">ì»¤ìŠ¤í…€ ë¡œë” ì˜ˆì‹œ (3ì´ˆ)</button>
</div>

<!-- ê²°ê³¼ í‘œì‹œ ì˜ì—­ -->
<div class="card">
    <h3>ì‹¤í–‰ ê²°ê³¼</h3>
    <div id="result-area" style="min-height: 50px; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 1px solid #e9ecef;">
        <em>ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...</em>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // ê²°ê³¼ í‘œì‹œ í•¨ìˆ˜
    function showResult(message, type = 'info') {
        const resultArea = document.getElementById('result-area');
        const alertClass = type === 'error' ? 'alert-danger' : 'alert-success';
        resultArea.innerHTML = `<div class="alert ${alertClass}">${message}</div>`;
    }

    // 1. ê¸°ë³¸ ì‚¬ìš©ë²•
    async function basicExample() {
        try {
            const result = await showLoading(async () => {
                await new Promise(resolve => setTimeout(resolve, 3000));
                return 'ê¸°ë³¸ ì‘ì—…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!';
            });
            showResult(result);
        } catch (error) {
            showResult('ì˜¤ë¥˜ ë°œìƒ: ' + error.message, 'error');
        }
    }

    // 2. ë‹¤í¬ í…Œë§ˆ
    async function darkThemeExample() {
        try {
            const result = await showLoading(async () => {
                await new Promise(resolve => setTimeout(resolve, 2000));
                return 'ë‹¤í¬ í…Œë§ˆ ì‘ì—… ì™„ë£Œ!';
            }, { theme: 'dark' });
            showResult(result);
        } catch (error) {
            showResult('ì˜¤ë¥˜ ë°œìƒ: ' + error.message, 'error');
        }
    }

    // 2. ë¯¸ë‹ˆë©€ í…Œë§ˆ
    async function minimalThemeExample() {
        try {
            const result = await showLoading(async () => {
                await new Promise(resolve => setTimeout(resolve, 2000));
                return 'ë¯¸ë‹ˆë©€ í…Œë§ˆ ì‘ì—… ì™„ë£Œ!';
            }, { theme: 'minimal' });
            showResult(result);
        } catch (error) {
            showResult('ì˜¤ë¥˜ ë°œìƒ: ' + error.message, 'error');
        }
    }

    // 3. ìƒë‹¨ ìœ„ì¹˜
    async function topPositionExample() {
        try {
            const result = await showLoading(async () => {
                await new Promise(resolve => setTimeout(resolve, 2000));
                return 'ìƒë‹¨ ìœ„ì¹˜ ì‘ì—… ì™„ë£Œ!';
            }, { position: 'top' });
            showResult(result);
        } catch (error) {
            showResult('ì˜¤ë¥˜ ë°œìƒ: ' + error.message, 'error');
        }
    }

    // 3. í•˜ë‹¨ ìœ„ì¹˜
    async function bottomPositionExample() {
        try {
            const result = await showLoading(async () => {
                await new Promise(resolve => setTimeout(resolve, 2000));
                return 'í•˜ë‹¨ ìœ„ì¹˜ ì‘ì—… ì™„ë£Œ!';
            }, { position: 'bottom' });
            showResult(result);
        } catch (error) {
            showResult('ì˜¤ë¥˜ ë°œìƒ: ' + error.message, 'error');
        }
    }

    // 4. API ì‹œë®¬ë ˆì´ì…˜
    async function apiSimulationExample() {
        try {
            const result = await showLoading(async () => {
                // API í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // ê°€ìƒì˜ API ì‘ë‹µ
                const mockData = {
                    status: 'success',
                    data: { message: 'API í˜¸ì¶œ ì„±ê³µ!' }
                };
                
                await new Promise(resolve => setTimeout(resolve, 2000));
                return `API ì‘ë‹µ: ${mockData.data.message}`;
            });
            showResult(result);
        } catch (error) {
            showResult('API ì˜¤ë¥˜: ' + error.message, 'error');
        }
    }

    // 5. ì—°ì† ì‘ì—…
    async function sequentialTasksExample() {
        try {
            const results = [];
            
            for (let i = 0; i < 3; i++) {
                const result = await showLoading(async () => {
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    return `ì‘ì—… ${i + 1} ì™„ë£Œ`;
                });
                results.push(result);
            }
            
            showResult(`ëª¨ë“  ì‘ì—… ì™„ë£Œ: ${results.join(', ')}`);
        } catch (error) {
            showResult('ì—°ì† ì‘ì—… ì˜¤ë¥˜: ' + error.message, 'error');
        }
    }

    // 6. ì—ëŸ¬ ì²˜ë¦¬
    async function errorHandlingExample() {
        try {
            await showLoading(async () => {
                await new Promise(resolve => setTimeout(resolve, 1000));
                throw new Error('ì˜ë„ëœ ì—ëŸ¬ì…ë‹ˆë‹¤');
            });
        } catch (error) {
            showResult(`ì—ëŸ¬ê°€ ì ì ˆíˆ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤: ${error.message}`, 'error');
        }
    }

    // 7. ì»¤ìŠ¤í…€ ë¡œë”
    async function customLoaderExample() {
        try {
            const customLoader = createLoader({
                theme: 'dark',
                position: 'top',
                showDelay: 500
            });
            
            const result = await customLoader.show(async () => {
                await new Promise(resolve => setTimeout(resolve, 3000));
                return 'ì»¤ìŠ¤í…€ ë¡œë” ì‘ì—… ì™„ë£Œ!';
            });
            
            showResult(result);
        } catch (error) {
            showResult('ì»¤ìŠ¤í…€ ë¡œë” ì˜¤ë¥˜: ' + error.message, 'error');
        }
    }
</script>
{% endblock %}
